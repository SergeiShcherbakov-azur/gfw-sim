<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>GFW Node & Cost Simulator</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <div class="topbar">
    <div class="title">GFW Node & Cost Simulator</div>
    <div class="actions">
      <select id="selSnapshots" class="btn">
        <option disabled selected>Loading...</option>
      </select>
      <button class="btn green" id="btnCapture" title="–ó–∞—Ö–≤–∞—Ç–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ K8s">üì∑ New Snapshot</button>
      
      <div style="width:1px;height:24px;background:var(--border);margin:0 6px"></div>

      <button class="btn blue" id="btnRefresh">–û–±–Ω–æ–≤–∏—Ç—å</button>
      <button class="btn red" id="btnReset">–°–±—Ä–æ—Å–∏—Ç—å</button>
      <button class="btn green" id="btnRefreshPrices">–¶–µ–Ω—ã AWS</button>
    </div>
  </div>

  <div class="wrap">
    <div class="summary" id="summaryBlock">
        </div>

    <div class="card viol-card" id="violCard">
      <div class="hdr">
        <h3 style="color:#ff6b6b">‚ö†Ô∏è –ù–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª</h3>
        <span class="pill red" id="violCount">0</span>
      </div>
      <div class="body" style="padding:0">
        <div class="viol-list" id="violList">
          </div>
      </div>
    </div>

    <div class="grid">
      <div class="card panel">
        <div class="hdr">
          <h3>–ù–æ–¥—ã</h3>
          <div class="pods-title"><span class="pill" id="nodesCount">0</span></div>
        </div>
        <div class="body">
          <div class="table-wrap" id="nodesWrap">
            <table>
              <thead>
                <tr>
                  <th data-sort="node" class="col-node">–ù–æ–¥–∞</th>
                  <th data-sort="nodepool">Nodepool</th>
                  <th data-sort="cost" class="right">$/–¥–µ–Ω—å (24h)</th>
                  <th data-sort="cpu">CPU (req / use)</th>
                  <th data-sort="ram">RAM (req / use)</th>
                </tr>
              </thead>
              <tbody id="nodesBody"></tbody>
            </table>
          </div>
          <div class="drop-hint">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ pod –∏–∑ –ø—Ä–∞–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ —Å—Ç—Ä–æ–∫—É –Ω–æ–¥—ã —Å–ª–µ–≤–∞ ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞.</div>
        </div>
      </div>

      <div class="card panel">
        <div class="hdr">
          <h3>–ü–æ–¥—ã –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–æ–¥–µ</h3>
          <div class="pods-title">
            <span>–ù–æ–¥–∞: <strong id="selNode">‚Äî</strong></span>
            <span class="pill" id="podsCount">0</span>
          </div>
        </div>
        <div class="body">
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th class="nosort">Namespace</th>
                  <th class="nosort">Pod</th>
                  <th class="nosort right">Active</th> <th class="nosort">Type</th>
                  <th class="nosort right">CPU (m)</th>
                  <th class="nosort right">RAM (MiB)</th>
                  <th class="nosort">Flags</th>
                </tr>
              </thead>
              <tbody id="podsBody"></tbody>
            </table>
          </div>
          <div class="msg" id="msg">Drag pod ‚Üí drop on node to move it.</div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="moveModalOverlay">
    <div class="modal">
        <div class="modal-hdr">
            <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞ Pod</span>
            <span style="cursor:pointer" onclick="closeModal()">‚úï</span>
        </div>
        <div class="modal-body">
            <div style="font-size:13px; color:var(--text); margin-bottom:5px;">
                –ü–µ—Ä–µ–Ω–æ—Å –ø–æ–¥–∞ <strong id="mPodId" class="mono">...</strong><br>
                –ù–∞ –Ω–æ–¥—É (Pool): <strong id="mTargetNode" class="mono">...</strong>
            </div>

            <div class="chk-group" id="mOwnerGroup">
                <input type="checkbox" id="mCheckOwner">
                <span>–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤–µ—Å—å <span id="mOwnerKind">Deployment</span> <b><span id="mOwnerName">...</span></b>?</span>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Requests CPU (m)</label>
                    <input class="inp" type="number" id="mCpu">
                </div>
                <div class="form-group">
                    <label>Requests Memory (Bytes)</label>
                    <input class="inp" type="number" id="mMem">
                </div>
            </div>

            <div class="form-group">
                <label>Node Selector (JSON)</label>
                <textarea class="inp" id="mSelector"></textarea>
            </div>
            
            <div class="form-group">
                <label>Tolerations (JSON)</label>
                <textarea class="inp" id="mTolerations"></textarea>
            </div>
            
            <div style="font-size:11px; color:var(--muted)">
                * –ü–æ–ª—è Selector –∏ Tolerations –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Ü–µ–ª–µ–≤—ã–º NodePool.
            </div>
        </div>
        <div class="modal-ftr">
            <button class="btn" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn blue" onclick="commitMove()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏</button>
        </div>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>